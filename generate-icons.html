<!DOCTYPE html>
<html>
<head>
    <title>PWA Icon Generator</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            padding: 20px; 
            background: #0b1220; 
            color: white; 
        }
        .icon-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); 
            gap: 20px; 
            margin: 20px 0; 
        }
        .icon-item { 
            text-align: center; 
            padding: 15px; 
            border: 1px solid #333; 
            border-radius: 8px; 
        }
        canvas { 
            border: 1px solid #555; 
            background: white; 
            border-radius: 4px; 
        }
        button {
            background: #7dd3fc;
            color: #0b1220;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
            font-weight: 600;
        }
        .log {
            background: #1a2332;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <h1>🎨 PWA Icon Generator - Chingadrop</h1>
    <p>Generate all required PWA icons from SVG</p>
    
    <button onclick="generateAllIcons()">🚀 Generate All Icons</button>
    <button onclick="downloadAll()">📥 Download All</button>
    
    <div id="log" class="log">Click "Generate All Icons" to start...</div>
    
    <div class="icon-grid" id="iconGrid"></div>

    <script>
        const iconSizes = [72, 96, 128, 144, 152, 192, 384, 512];
        const generatedIcons = new Map();
        
        function log(message) {
            const logDiv = document.getElementById('log');
            logDiv.innerHTML += message + '<br>';
            logDiv.scrollTop = logDiv.scrollHeight;
        }
        
        async function generateAllIcons() {
            log('🎨 Starting icon generation...');
            const grid = document.getElementById('iconGrid');
            grid.innerHTML = '';
            
            // Create the SVG content
            const svgContent = \`<svg width="512" height="512" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
              <defs>
                <radialGradient id="bgGradient" cx="30%" cy="30%" r="70%">
                  <stop offset="0%" style="stop-color:#7dd3fc"/>
                  <stop offset="45%" style="stop-color:#38bdf8"/>
                  <stop offset="65%" style="stop-color:#0ea5e9"/>
                  <stop offset="100%" style="stop-color:#0369a1"/>
                </radialGradient>
              </defs>
              <circle cx="256" cy="256" r="240" fill="url(#bgGradient)"/>
              <circle cx="256" cy="200" r="80" fill="white" opacity="0.9"/>
              <circle cx="256" cy="200" r="60" fill="none" stroke="#0b1220" stroke-width="8"/>
              <text x="256" y="230" font-family="Arial Black" font-size="80" font-weight="900" text-anchor="middle" fill="#0b1220">💎</text>
              <g opacity="0.8">
                <ellipse cx="180" cy="320" rx="25" ry="15" fill="none" stroke="white" stroke-width="6"/>
                <ellipse cx="220" cy="340" rx="25" ry="15" fill="none" stroke="white" stroke-width="6"/>
                <ellipse cx="260" cy="340" rx="25" ry="15" fill="none" stroke="white" stroke-width="6"/>
                <ellipse cx="300" cy="340" rx="25" ry="15" fill="none" stroke="white" stroke-width="6"/>
                <ellipse cx="340" cy="320" rx="25" ry="15" fill="none" stroke="white" stroke-width="6"/>
              </g>
              <g opacity="0.7">
                <circle cx="150" cy="150" r="4" fill="white"/>
                <circle cx="380" cy="180" r="3" fill="white"/>
                <circle cx="120" cy="250" r="2" fill="white"/>
                <circle cx="400" cy="280" r="3" fill="white"/>
                <circle cx="160" cy="380" r="2" fill="white"/>
                <circle cx="360" cy="400" r="4" fill="white"/>
              </g>
            </svg>\`;
            
            for (const size of iconSizes) {
                await generateIcon(size, svgContent);
            }
            
            log('✅ All icons generated successfully!');
        }
        
        async function generateIcon(size, svgContent) {
            return new Promise((resolve) => {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                canvas.width = size;
                canvas.height = size;
                
                const img = new Image();
                const svgBlob = new Blob([svgContent], { type: 'image/svg+xml;charset=utf-8' });
                const url = URL.createObjectURL(svgBlob);
                
                img.onload = function() {
                    ctx.drawImage(img, 0, 0, size, size);
                    
                    // Convert to PNG
                    canvas.toBlob((blob) => {
                        generatedIcons.set(\`icon-\${size}x\${size}.png\`, blob);
                        
                        // Add to grid
                        const item = document.createElement('div');
                        item.className = 'icon-item';
                        item.innerHTML = \`
                            <canvas width="\${Math.min(size, 100)}" height="\${Math.min(size, 100)}"></canvas>
                            <div>\${size}x\${size}</div>
                            <button onclick="downloadIcon('\${size}')">Download</button>
                        \`;
                        
                        const displayCanvas = item.querySelector('canvas');
                        const displayCtx = displayCanvas.getContext('2d');
                        const displaySize = Math.min(size, 100);
                        displayCtx.drawImage(canvas, 0, 0, displaySize, displaySize);
                        
                        document.getElementById('iconGrid').appendChild(item);
                        
                        log(\`✓ Generated \${size}x\${size} icon\`);
                        resolve();
                    }, 'image/png');
                    
                    URL.revokeObjectURL(url);
                };
                
                img.src = url;
            });
        }
        
        function downloadIcon(size) {
            const blob = generatedIcons.get(\`icon-\${size}x\${size}.png\`);
            if (blob) {
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = \`icon-\${size}x\${size}.png\`;
                a.click();
                URL.revokeObjectURL(url);
                log(\`📥 Downloaded icon-\${size}x\${size}.png\`);
            }
        }
        
        function downloadAll() {
            if (generatedIcons.size === 0) {
                log('❌ No icons generated yet. Click "Generate All Icons" first.');
                return;
            }
            
            generatedIcons.forEach((blob, filename) => {
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = filename;
                a.click();
                URL.revokeObjectURL(url);
            });
            
            log(\`📥 Downloaded all \${generatedIcons.size} icons\`);
        }
    </script>
</body>
</html>